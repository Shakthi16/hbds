<html>
<head>
    <title>Happy Birthday Friend</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
        @import url('https://fonts.googleapis.com/css?family=Lato:300italic');

        /* Rose gold colors */
        :root {
            --rose-gold-light: #f9e4e0;
            --rose-gold-medium: #e7bfb8;
            --rose-gold-dark: #b76e79;
            --rose-gold-accent: #d99a8f;
            --rose-gold-shadow: rgba(183, 110, 121, 0.3);
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-size: 16px;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-size-adjust: 100%;
        }

        body {
            background: linear-gradient(to bottom, var(--rose-gold-light), var(--rose-gold-medium));
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 1.5rem 1rem 3rem;
            box-sizing: border-box;
            font-family: 'Lato', sans-serif;
        }

        .fade-in {
            animation: fadeIn 3s ease-in-out;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
            justify-content: center;
        }

        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        .cake {
            position: relative;
            width: 280px;
            height: 280px;
            cursor: pointer;
            margin: 2rem auto;
            flex-shrink: 0;
        }

        .velas {
            background: var(--rose-gold-medium);
            border-radius: 100%;
            position: absolute;
            top: 50%;
            left: 50%;
            margin-left: -14px;
            margin-top: -47px;
            width: 14px;
            height: 47px;
        }

        .velas:after,
        .velas:before {
            background: var(--rose-gold-accent);
            content: "";
            position: absolute;
            width: 100%;
            height: 6.22px;
        }

        .velas:after {
            top: 25%;
            left: 0;
        }

        .velas:before {
            top: 45%;
            left: 0;
        }

        .fuego {
            border-radius: 100%;
            box-shadow: 0 0 60px 15px rgba(247, 210, 204, 0.6);
            position: absolute;
            top: -18px;
            left: 50%;
            margin-left: -9.33px;
            width: 18.66px;
            height: 35px;
        }

        .fuego:nth-child(1) {
            animation: fuego 2s infinite;
        }

        .fuego:nth-child(2) {
            animation: fuego 1.5s infinite;
        }

        .fuego:nth-child(3) {
            animation: fuego 1s infinite;
        }

        .fuego:nth-child(4) {
            animation: fuego 0.5s infinite;
        }

        .fuego:nth-child(5) {
            animation: fuego 0.2s infinite;
        }

        @keyframes fuego {
            0% {
                background: rgba(247, 210, 204, 0.5);
                transform: translateY(0) scale(1);
            }
            50% {
                background: rgba(183, 110, 121, 0.1);
                transform: translateY(-40px) scale(0);
            }
            100% {
                background: rgba(247, 210, 204, 0.5);
                transform: translateY(0) scale(1);
            }
        }

        .cobertura {
            background: var(--rose-gold-medium);
            border-radius: 100px;
            position: absolute;
            top: 60%;
            left: 50%;
            margin-left: -77.78px;
            margin-top: -28px;
            width: 155.56px;
            height: 35px;
            z-index: 10;
        }

        .cobertura:after,
        .cobertura:before {
            background: var(--rose-gold-medium);
            border-radius: 100px;
            content: "";
            position: absolute;
            width: 14px;
            height: 28px;
        }

        .cobertura:after {
            top: 13.33px;
            right: 40px;
        }

        .cobertura:before {
            top: 20px;
            right: 25.45px;
        }

        .bizcocho {
            background: var(--rose-gold-accent);
            position: absolute;
            bottom: 0;
            left: 50%;
            margin-left: -70px;
            width: 140px;
            height: 93.33px;
        }

        .bizcocho:after,
        .bizcocho:before {
            background: var(--rose-gold-light);
            content: "";
            position: absolute;
            width: 100%;
            height: 7px;
        }

        .bizcocho:after {
            top: 28px;
            left: 0;
        }

        .bizcocho:before {
            top: 56px;
            left: 0;
        }

        h1,
        p {
            font-family: 'Lato', sans-serif;
            font-weight: 300;
            font-style: italic;
            text-align: center;
            width: 100%;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            margin: 0;
        }

        h1 {
            color: var(--rose-gold-dark);
            font-size: 1.75rem;
            margin-top: 1.5rem;
        }

        p {
            color: var(--rose-gold-dark);
            font-size: 1.1rem;
            line-height: 1.8;
            margin-top: 0.5rem;
            font-weight: 600;
        }

        .cake {
            cursor: pointer;
        }

        .cake .fuego {
            display: block;
        }

        .cake.off .fuego {
            display: none;
        }

        /* Paper letter styling */
        .paper {
            display: none;
            background: var(--rose-gold-light);
            border: 2px solid var(--rose-gold-accent);
            border-radius: 12px;
            padding: 2rem 1.5rem;
            box-shadow: 0 0 20px var(--rose-gold-shadow);
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
            transition: opacity 0.5s ease-in-out;
            overflow: visible;
            position: relative;
            opacity: 0;
        }

        .paper.open {
            display: block;
            opacity: 1;
        }

        .fireworks {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #020202;
            cursor: crosshair;
            z-index: 60;
        }

        .fireworks.open {
            display: block;
        }

        .fireworks h1 {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--rose-gold-dark);
            font-family: "Source Sans Pro";
            font-size: 1.75rem;
            font-weight: 900;
            -webkit-user-select: none;
            user-select: none;
            text-align: center;
            padding: 0 1rem;
        }

        canvas {
            display: block;
        }

        .heart-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin: 2rem 0;
        }

        .arrow {
            position: absolute;
            left: -50px;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateX(0);
            }
            50% {
                transform: translateX(-10px);
            }
        }

        /* Letter content */
        .letter h1 {
            margin-top: 0;
            margin-bottom: 1.5rem;
            color: var(--rose-gold-dark);
            font-size: 2.5rem;
            font-family: 'Pacifico', cursive;
            line-height: 1.1;
        }

        .letter p {
            color: var(--rose-gold-dark);
            font-size: 1.125rem;
            line-height: 1.7;
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .letter p:last-child {
            margin-bottom: 0;
        }

        /* Handshake icon */
        .handshake-icon {
            cursor: pointer;
            color: var(--rose-gold-dark);
            transition: color 0.3s ease;
            font-size: 3.5rem;
            padding: 1rem;
        }
        .handshake-icon:hover {
            color: var(--rose-gold-accent);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .cake {
                width: 240px;
                height: 240px;
                margin: 1.5rem auto;
            }
            .letter h1 {
                font-size: 2.25rem;
                margin-bottom: 1.25rem;
            }
            .letter p {
                font-size: 1.05rem;
                margin-bottom: 1.25rem;
            }
            .handshake-icon {
                font-size: 3rem;
            }
            .arrow {
                left: -40px;
            }
            .paper {
                padding: 1.75rem 1.25rem;
                margin: 1rem auto;
            }
            h1 {
                font-size: 1.5rem;
            }
            p {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 1rem 0.5rem 2rem;
            }
            .cake {
                width: 200px;
                height: 200px;
                margin: 1rem auto;
            }
            .letter h1 {
                font-size: 2rem;
                margin-bottom: 1rem;
            }
            .letter p {
                font-size: 1rem;
                margin-bottom: 1rem;
            }
            .handshake-icon {
                font-size: 2.5rem;
            }
            .arrow {
                left: -30px;
            }
            .paper {
                padding: 1.5rem 1rem;
                margin: 0.5rem auto;
            }
            h1 {
                font-size: 1.4rem;
                margin-top: 1rem;
            }
            p {
                font-size: 0.95rem;
            }
        }

        @media (max-width: 360px) {
            .cake {
                width: 180px;
                height: 180px;
                margin: 0.75rem auto;
            }
            .letter h1 {
                font-size: 1.8rem;
                margin-bottom: 0.75rem;
            }
            .letter p {
                font-size: 0.95rem;
                margin-bottom: 0.75rem;
            }
            .handshake-icon {
                font-size: 2.25rem;
            }
            .arrow {
                left: -25px;
            }
            .paper {
                padding: 1.25rem 0.75rem;
                margin: 0.5rem auto;
            }
            h1 {
                font-size: 1.3rem;
                margin-top: 0.75rem;
            }
            p {
                font-size: 0.9rem;
            }
        }

        /* Better touch targets for mobile */
        .cake, .handshake-icon {
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Ensure content takes full height */
        .main-content {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="main-content">
        <main class="fade-in" role="main" aria-label="Birthday greeting and letter">
            <section aria-label="Birthday cake and greeting" class="flex flex-col items-center">
                <div class="cake" onclick="blowCandles()" role="button" tabindex="0" aria-label="Birthday cake, click to blow candles" onkeydown="if(event.key==='Enter' || event.key===' ') { event.preventDefault(); blowCandles(); }">
                    <div class="velas" aria-hidden="true">
                        <div class="fuego"></div>
                        <div class="fuego"></div>
                        <div class="fuego"></div>
                        <div class="fuego"></div>
                        <div class="fuego"></div>
                    </div>
                    <div class="cobertura"></div>
                    <div class="bizcocho"></div>
                    <h1>Happy Birthday!</h1>
                    <p style="color:var(--rose-gold-dark); font-weight: 600;">Friend</p>
                </div>
                <p id="wish-text" class="text-center text-rose-gold-dark" style="font-family: 'Roboto', sans-serif; font-weight: 500; font-size: 1.125rem; max-width: 320px; margin: 0.5rem 1rem 1rem;">
                    Pray for a wish and touch the candle to blow it out!
                </p>
            </section>

            <section id="paper" class="paper" role="region" aria-label="Birthday letter" tabindex="0">
                <article class="letter" id="letter">
                    <h1>Happy Birthday Friend!</h1>
                    <p>
                        Thanks for being my friend and a good listener. I could say this confidently: I am blessed to have a friend like you who says "enanalu pathukla". I knew I would say what I should only look after but deep down I felt okay if something goes wrong I could go and tell a person who never judges me but instead says "next time pathuklam". There are more to thank you about but since this is your birthday wish, I wish you a great life ahead and a happy happiest birthday you ever had. Wish we could stay friends forever and whatever you wish will definitely happen soon because you have gone through many struggles. Hereafter your life will only be filled and turned into a beautiful garden of flowers. I mean that much happiness... stay stronger and happier than you have ever lived before. If something happens, don't ever think twice, call me anytime. Even if I am in a situation where I could not pick, I would definitely try to come and pick your call. Speak and so my friend, happy birthday like it's your 20th, right? Happy 20!
                    </p>
                    <p>By your recent friend,</p>
                    <p class="mb-6 font-semibold">so yeah be happy life is certain many happy things will happen to you, dont think about unwanted things clear your mind and do whatever you mind and heart tells you to do first listen to heart cross check with mind and to the thing and pray to god everthing will be succeeded..</p>
                    <div class="heart-container">
                        <i class="fas fa-handshake handshake-icon" onclick="showFireworks()" aria-label="Handshake icon to celebrate birthday" role="button" tabindex="0" onkeydown="if(event.key==='Enter' || event.key===' ') { event.preventDefault(); showFireworks(); }"></i>
                        <div class="arrow" aria-hidden="true">
                            <i class="fas fa-arrow-right text-rose-gold-dark text-2xl"></i>
                        </div>
                    </div>
                    <p class="text-center" style="font-family: 'Roboto', sans-serif; font-weight: 500; font-size: 1rem; margin-top: 1rem;">
                        Touch the handshake after praying for something!
                    </p>
                </article>
            </section>
        </main>
    </div>

    <div class="fireworks" id="fireworks" role="alert" aria-live="assertive">
        <h1>Everything happens as you wish. Happy Happy Birthday Friend!</h1>
        <canvas id="birthday"></canvas>
    </div>

    <script>
        function blowCandles() {
            const cake = document.querySelector('.cake');
            const wishText = document.getElementById('wish-text');
            if (!cake || !wishText) return;
            cake.style.display = 'none';
            wishText.style.display = 'none';
            setTimeout(() => {
                const paper = document.getElementById('paper');
                paper.classList.add('open');
                document.getElementById('letter').classList.add('open');
                paper.focus();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 500);
        }

        function showFireworks() {
            const paper = document.getElementById('paper');
            const fireworks = document.getElementById('fireworks');
            if (!paper || !fireworks) return;
            paper.style.display = 'none';
            fireworks.classList.add('open');
            startFireworks();
        }

        function startFireworks() {
            const PI2 = Math.PI * 2;
            const random = (min, max) => Math.random() * (max - min + 1) + min | 0;
            const timestamp = _ => new Date().getTime();

            class Birthday {
                constructor() {
                    this.resize();
                    this.fireworks = [];
                    this.counter = 0;
                }

                resize() {
                    this.width = canvas.width = window.innerWidth;
                    let center = this.width / 2 | 0;
                    this.spawnA = center - center / 4 | 0;
                    this.spawnB = center + center / 4 | 0;
                    this.height = canvas.height = window.innerHeight;
                    this.spawnC = this.height * .1;
                    this.spawnD = this.height * .5;
                }

                onClick(evt) {
                    let x = evt.clientX || (evt.touches && evt.touches[0].pageX);
                    let y = evt.clientY || (evt.touches && evt.touches[0].pageY);
                    let count = random(3, 5);
                    for (let i = 0; i < count; i++) this.fireworks.push(new Firework(
                        random(this.spawnA, this.spawnB),
                        this.height,
                        x,
                        y,
                        random(0, 260),
                        random(30, 110)));
                    this.counter = -1;
                }

                update(delta) {
                    ctx.globalCompositeOperation = 'hard-light';
                    ctx.fillStyle = `rgba(20,20,20,${ 7 * delta })`;
                    ctx.fillRect(0, 0, this.width, this.height);
                    ctx.globalCompositeOperation = 'lighter';
                    for (let firework of this.fireworks) firework.update(delta);
                    this.counter += delta * 3;
                    if (this.counter >= 1) {
                        this.fireworks.push(new Firework(
                            random(this.spawnA, this.spawnB),
                            this.height,
                            random(0, this.width),
                            random(this.spawnC, this.spawnD),
                            random(0, 360),
                            random(30, 110)));
                        this.counter = 0;
                    }
                    if (this.fireworks.length > 1000) this.fireworks = this.fireworks.filter(firework => !firework.dead);
                }
            }

            class Firework {
                constructor(x, y, targetX, targetY, shade, offsprings) {
                    this.dead = false;
                    this.offsprings = offsprings;
                    this.x = x;
                    this.y = y;
                    this.targetX = targetX;
                    this.targetY = targetY;
                    this.shade = shade;
                    this.history = [];
                }

                update(delta) {
                    if (this.dead) return;
                    let xDiff = this.targetX - this.x;
                    let yDiff = this.targetY - this.y;
                    if (Math.abs(xDiff) > 3 || Math.abs(yDiff) > 3) {
                        this.x += xDiff * 2 * delta;
                        this.y += yDiff * 2 * delta;
                        this.history.push({ x: this.x, y: this.y });
                        if (this.history.length > 20) this.history.shift();
                    } else {
                        if (this.offsprings && !this.madeChilds) {
                            let babies = this.offsprings / 2;
                            for (let i = 0; i < babies; i++) {
                                let targetX = this.x + this.offsprings * Math.cos(PI2 * i / babies) | 0;
                                let targetY = this.y + this.offsprings * Math.sin(PI2 * i / babies) | 0;
                                birthday.fireworks.push(new Firework(this.x, this.y, targetX, targetY, this.shade, 0));
                            }
                        }
                        this.madeChilds = true;
                        this.history.shift();
                    }
                    if (this.history.length === 0) this.dead = true;
                    else if (this.offsprings) {
                        for (let i = 0; this.history.length > i; i++) {
                            let point = this.history[i];
                            ctx.beginPath();
                            ctx.fillStyle = 'hsl(' + this.shade + ',100%,' + i + '%)';
                            ctx.arc(point.x, point.y, 1, 0, PI2, false);
                            ctx.fill();
                        }
                    } else {
                        ctx.beginPath();
                        ctx.fillStyle = 'hsl(' + this.shade + ',100%,50%)';
                        ctx.arc(this.x, this.y, 1, 0, PI2, false);
                        ctx.fill();
                    }
                }
            }

            let canvas = document.getElementById('birthday');
            let ctx = canvas.getContext('2d');
            let then = timestamp();
            let birthday = new Birthday();
            window.onresize = () => birthday.resize();
            document.onclick = evt => birthday.onClick(evt);
            document.ontouchstart = evt => birthday.onClick(evt);

            (function loop() {
                requestAnimationFrame(loop);
                let now = timestamp();
                let delta = now - then;
                then = now;
                birthday.update(delta / 1000);
            })();
        }
    </script>
</body>
</html>
